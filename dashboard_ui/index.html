<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | CodeChicks</title>
    <meta name="description" content="Your personal CodeChicks dashboard">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header glass-panel">
            <div class="header-left">
                <div class="logo">
                    <span class="logo-icon">üê£</span>
                    <span class="logo-text">CodeChicks</span>
                </div>
            </div>
            <div class="header-center">
                <h1 class="welcome-text">Welcome back, <span class="user-name">User</span>!</h1>
            </div>
            <div class="header-right">
                <button class="logout-btn glass-btn" onclick="logout()">Logout</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Stats Row -->
            <section class="stats-row">
                <!-- Stopwatch Sessions Card -->
                <div class="stat-card glass-panel">
                    <div class="stat-icon">‚è±Ô∏è</div>
                    <div class="stat-info">
                        <span class="stat-value" id="stopwatch-sessions">5</span>
                        <span class="stat-label">Stopwatch Sessions</span>
                    </div>
                </div>

                <!-- Total Time Card -->
                <div class="stat-card glass-panel">
                    <div class="stat-icon">‚è≥</div>
                    <div class="stat-info">
                        <span class="stat-value" id="total-time">2h 45m</span>
                        <span class="stat-label">Total Focused Time</span>
                    </div>
                </div>

                <!-- Chat Activity Card -->
                <div class="stat-card glass-panel">
                    <div class="stat-icon">üí¨</div>
                    <div class="stat-info">
                        <span class="stat-value" id="chat-joins">3</span>
                        <span class="stat-label">Chat Sessions</span>
                    </div>
                </div>
            </section>

            <!-- Content Grid -->
            <section class="content-grid">
                <!-- Global Chat Card -->
                <div class="chat-card glass-panel">
                    <div class="card-header">
                        <h2 class="card-title">üí¨ Global Chat</h2>
                        <div class="online-indicator">
                            <span class="online-dot"></span>
                            <span class="online-text">8 online</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-desc">Join the community chat and connect with other devs.</p>
                        <a href="/chat_ui/index.html" class="join-chat-btn glass-btn">Join Chat ‚Üí</a>
                    </div>
                </div>

                <!-- Activity History Card -->
                <div class="history-card glass-panel">
                    <div class="card-header">
                        <h2 class="card-title">üìä Your Activity</h2>
                    </div>
                    <div class="history-list">
                        <div class="history-item">
                            <span class="history-icon">‚è±Ô∏è</span>
                            <div class="history-content">
                                <span class="history-text">Stopwatch session - 45 min</span>
                                <span class="history-time">Today, 2:30 PM</span>
                            </div>
                        </div>
                        <div class="history-item">
                            <span class="history-icon">üí¨</span>
                            <div class="history-content">
                                <span class="history-text">Joined Global Chat</span>
                                <span class="history-time">Today, 1:15 PM</span>
                            </div>
                        </div>
                        <div class="history-item">
                            <span class="history-icon">‚è±Ô∏è</span>
                            <div class="history-content">
                                <span class="history-text">Stopwatch session - 30 min</span>
                                <span class="history-time">Yesterday, 5:00 PM</span>
                            </div>
                        </div>
                        <div class="history-item">
                            <span class="history-icon">‚è±Ô∏è</span>
                            <div class="history-content">
                                <span class="history-text">Stopwatch session - 1h 10m</span>
                                <span class="history-time">Yesterday, 10:00 AM</span>
                            </div>
                        </div>
                        <div class="history-item">
                            <span class="history-icon">üí¨</span>
                            <div class="history-content">
                                <span class="history-text">Joined Global Chat</span>
                                <span class="history-time">Jan 26, 3:45 PM</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Floating Stopwatch Button -->
        <button class="floating-stopwatch-btn" id="stopwatch-toggle" title="Open Stopwatch">
            <span class="stopwatch-icon">‚è±Ô∏è</span>
        </button>

        <!-- Floating Stopwatch Window -->
        <div class="floating-stopwatch glass-panel" id="stopwatch-window">
            <div class="stopwatch-header" id="stopwatch-header">
                <span class="stopwatch-title">‚è±Ô∏è Stopwatch</span>
                <div class="stopwatch-actions">
                    <button class="action-btn minimize" id="minimize-btn" title="Minimize">‚àí</button>
                    <button class="action-btn close" id="close-btn" title="Close">‚úï</button>
                </div>
            </div>
            <div class="stopwatch-body" id="stopwatch-body">
                <div class="stopwatch-display" id="stopwatch-display">00:00:00</div>
                <div class="stopwatch-controls">
                    <button class="ctrl-btn start" id="start-btn">‚ñ∂</button>
                    <button class="ctrl-btn pause" id="pause-btn">‚è∏</button>
                    <button class="ctrl-btn reset" id="reset-btn">‚Ü∫</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== Stopwatch Logic =====
        const toggleBtn = document.getElementById('stopwatch-toggle');
        const stopwatchWindow = document.getElementById('stopwatch-window');
        const closeBtn = document.getElementById('close-btn');
        const minimizeBtn = document.getElementById('minimize-btn');
        const stopwatchBody = document.getElementById('stopwatch-body');
        const header = document.getElementById('stopwatch-header');
        const startBtn = document.getElementById('start-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const resetBtn = document.getElementById('reset-btn');
        const display = document.getElementById('stopwatch-display');

        let seconds = 0;
        let interval = null;
        let isRunning = false;
        let isMinimized = false;

        // Show stopwatch
        toggleBtn.addEventListener('click', () => {
            stopwatchWindow.classList.add('active');
            toggleBtn.style.display = 'none';
        });

        // Close stopwatch
        closeBtn.addEventListener('click', () => {
            stopwatchWindow.classList.remove('active');
            toggleBtn.style.display = 'flex';
        });

        // Minimize
        minimizeBtn.addEventListener('click', () => {
            isMinimized = !isMinimized;
            stopwatchBody.style.display = isMinimized ? 'none' : 'flex';
            minimizeBtn.textContent = isMinimized ? '+' : '‚àí';
        });

        // Format time
        function formatTime(sec) {
            const h = Math.floor(sec / 3600);
            const m = Math.floor((sec % 3600) / 60);
            const s = sec % 60;
            return `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
        }

        // Start
        startBtn.addEventListener('click', () => {
            if (!isRunning) {
                isRunning = true;
                interval = setInterval(() => {
                    seconds++;
                    display.textContent = formatTime(seconds);
                }, 1000);
            }
        });

        // Pause
        pauseBtn.addEventListener('click', () => {
            isRunning = false;
            clearInterval(interval);
        });

        // Reset
        resetBtn.addEventListener('click', () => {
            isRunning = false;
            clearInterval(interval);
            seconds = 0;
            display.textContent = '00:00:00';
        });

        // ===== Draggable Window =====
        let isDragging = false;
        let offsetX = 0, offsetY = 0;

        header.addEventListener('mousedown', (e) => {
            if (e.target.tagName === 'BUTTON') return;
            isDragging = true;
            offsetX = e.clientX - stopwatchWindow.offsetLeft;
            offsetY = e.clientY - stopwatchWindow.offsetTop;
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const x = Math.max(0, Math.min(e.clientX - offsetX, window.innerWidth - stopwatchWindow.offsetWidth));
            const y = Math.max(0, Math.min(e.clientY - offsetY, window.innerHeight - stopwatchWindow.offsetHeight));
            stopwatchWindow.style.left = x + 'px';
            stopwatchWindow.style.top = y + 'px';
            stopwatchWindow.style.right = 'auto';
            stopwatchWindow.style.bottom = 'auto';
        });

        document.addEventListener('mouseup', () => isDragging = false);

        // Logout
        function logout() {
            localStorage.removeItem('access_token');
            window.location.href = '/';
        }
    </script>
</body>

</html>